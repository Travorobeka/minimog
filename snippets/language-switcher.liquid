{%- comment -%}
{% unless form_id %}
    {% assign form_id = 'language-form' %}
{% endunless %}
{%- endcomment -%}
{%- liquid 
  assign show_language_selector = true
-%}

{% if show_language_selector %}
  {% liquid
    assign min = 65
    assign max = 80
    assign diff = max | minus: min
    assign randomNumber = "now" | date: "%N" | modulo: diff | plus: min
  %}
  <div class="m-switcher-dropdown m-language-switcher {{ box_size }}">
    {% assign form_id = 'localization_form-' | append: randomNumber %}
    {% form 'localization', data-localization-form: '', id: form_id %}
      <input type="hidden" name="locale_code" value="{{ form.current_locale.iso_code }}" data-localization-input/>
      <m-select-component>
        <m-localization-form>
          <select class="js-selectNative" data-localization-select>
            {%- for language in localization.available_languages -%}
              <option
                value="{{- language.iso_code -}}"
                {%- if language.iso_code == localization.language.iso_code -%}
                  selected="selected"
                {%- endif -%}
              >
                {{- language.iso_code | upcase -}}
              </option>
            {%- endfor -%}
          </select>
        </m-localization-form>
        <div class="m-select-custom js-selectCustom" aria-hidden="true">
          <div class="m-select-custom--trigger">
            <span class="m-select-custom--trigger-text"></span>
            <span class="m-select-custom--trigger-icon">
              <svg fill="none" stroke="currentColor" stroke-width="1.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="plus-icon">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"/>
              </svg>
              <svg fill="none" stroke="currentColor" stroke-width="1.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="minus-icon">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"/>
              </svg>
            </span>
          </div>
          <div class="m-select-custom--options m-select-custom--options-{{ pos }}">
            {%- for language in localization.available_languages -%}
              <div class="m-select-custom--option" data-value="{{ language.iso_code }}">{{ language.iso_code | upcase }}</div>
            {%- endfor -%}
          </div>
        </div>
      </m-select-component>
    {% endform %}
  </div>
{% endif %}
