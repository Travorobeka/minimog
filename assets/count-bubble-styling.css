/* Count Bubble Advanced Styling System */
/* Uses header section theme customizer settings */

/* Base Count Bubble Styling */
.m-cart-count-bubble,
.m-cart-count,
.m-wishlist-count,
.m-compare-count {
  position: absolute !important;
  background-color: var(--bg-cart-wishlist-count) !important;
  color: var(--color-cart-wishlist-count) !important;
  border-width: var(--count-bubble-border-width) !important;
  border-style: solid !important;
  border-color: var(--count-bubble-border-color) !important;
  font-size: var(--count-bubble-font-size) !important;
  font-weight: var(--count-bubble-font-weight) !important;
  line-height: 1 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 10 !important;
  transition: all 0.3s ease !important;
  text-align: center !important;
  box-sizing: border-box !important;
}

/* Size Variations */
/* Small */
.m-cart-count-bubble[data-size="small"],
.m-cart-count[data-size="small"],
.m-wishlist-count[data-size="small"],
.m-compare-count[data-size="small"] {
  min-width: 14px !important;
  height: 14px !important;
  padding: 1px 3px !important;
}

/* Medium (default) */
.m-cart-count-bubble[data-size="medium"],
.m-cart-count[data-size="medium"],
.m-wishlist-count[data-size="medium"],
.m-compare-count[data-size="medium"] {
  min-width: 18px !important;
  height: 18px !important;
  padding: 2px 4px !important;
}

/* Large */
.m-cart-count-bubble[data-size="large"],
.m-cart-count[data-size="large"],
.m-wishlist-count[data-size="large"],
.m-compare-count[data-size="large"] {
  min-width: 22px !important;
  height: 22px !important;
  padding: 3px 6px !important;
}

/* Custom Size */
.m-cart-count-bubble[data-size="custom"],
.m-cart-count[data-size="custom"],
.m-wishlist-count[data-size="custom"],
.m-compare-count[data-size="custom"] {
  min-width: var(--count-bubble-custom-width) !important;
  width: var(--count-bubble-custom-width) !important;
  height: var(--count-bubble-custom-height) !important;
  padding: 1px !important;
}

/* Shape Variations */
/* Circle (default) */
.m-cart-count-bubble[data-style="circle"],
.m-cart-count[data-style="circle"],
.m-wishlist-count[data-style="circle"],
.m-compare-count[data-style="circle"] {
  border-radius: 50%;
}

/* Rounded Rectangle */
.m-cart-count-bubble[data-style="rounded"],
.m-cart-count[data-style="rounded"],
.m-wishlist-count[data-style="rounded"],
.m-compare-count[data-style="rounded"] {
  border-radius: 6px;
}

/* Square */
.m-cart-count-bubble[data-style="square"],
.m-cart-count[data-style="square"],
.m-wishlist-count[data-style="square"],
.m-compare-count[data-style="square"] {
  border-radius: 2px;
}

/* Pill Shape */
.m-cart-count-bubble[data-style="pill"],
.m-cart-count[data-style="pill"],
.m-wishlist-count[data-style="pill"],
.m-compare-count[data-style="pill"] {
  border-radius: 100px;
  min-width: 24px;
  padding-left: 8px;
  padding-right: 8px;
}

/* Position Variations with Custom Offset Support */
/* Top Right (default) */
.m-cart-count-bubble[data-position="top-right"],
.m-cart-count[data-position="top-right"],
.m-wishlist-count[data-position="top-right"],
.m-compare-count[data-position="top-right"] {
  top: calc(-6px + var(--count-bubble-offset-y)) !important;
  right: calc(-8px - var(--count-bubble-offset-x)) !important;
  left: auto !important;
  bottom: auto !important;
}

/* Top Left */
.m-cart-count-bubble[data-position="top-left"],
.m-cart-count[data-position="top-left"],
.m-wishlist-count[data-position="top-left"],
.m-compare-count[data-position="top-left"] {
  top: calc(-6px + var(--count-bubble-offset-y)) !important;
  left: calc(-8px + var(--count-bubble-offset-x)) !important;
  right: auto !important;
  bottom: auto !important;
}

/* Bottom Right */
.m-cart-count-bubble[data-position="bottom-right"],
.m-cart-count[data-position="bottom-right"],
.m-wishlist-count[data-position="bottom-right"],
.m-compare-count[data-position="bottom-right"] {
  bottom: calc(-6px - var(--count-bubble-offset-y)) !important;
  right: calc(-8px - var(--count-bubble-offset-x)) !important;
  top: auto !important;
  left: auto !important;
}

/* Bottom Left */
.m-cart-count-bubble[data-position="bottom-left"],
.m-cart-count[data-position="bottom-left"],
.m-wishlist-count[data-position="bottom-left"],
.m-compare-count[data-position="bottom-left"] {
  bottom: calc(-6px - var(--count-bubble-offset-y)) !important;
  left: calc(-8px + var(--count-bubble-offset-x)) !important;
  top: auto !important;
  right: auto !important;
}

/* Custom Position - Full manual control */
.m-cart-count-bubble[data-position="custom"],
.m-cart-count[data-position="custom"],
.m-wishlist-count[data-position="custom"],
.m-compare-count[data-position="custom"] {
  top: var(--count-bubble-offset-y) !important;
  right: calc(-1 * var(--count-bubble-offset-x)) !important;
  left: auto !important;
  bottom: auto !important;
}

/* Default positioning for existing bubbles without data attributes */
.m-cart-count-bubble:not([data-position]),
.m-cart-count:not([data-position]),
.m-wishlist-count:not([data-position]),
.m-compare-count:not([data-position]) {
  top: -6px;
  right: -8px;
}

/* Specific icon positioning adjustments */
.m-cart-count:not([data-position]) {
  right: -5px;
}

.m-wishlist-count:not([data-position]),
.m-compare-count:not([data-position]) {
  right: -4px;
}

/* Shadow Variations */
/* None */
.m-cart-count-bubble[data-shadow="none"],
.m-cart-count[data-shadow="none"],
.m-wishlist-count[data-shadow="none"],
.m-compare-count[data-shadow="none"] {
  box-shadow: none;
}

/* Soft (default) */
.m-cart-count-bubble[data-shadow="soft"],
.m-cart-count[data-shadow="soft"],
.m-wishlist-count[data-shadow="soft"],
.m-compare-count[data-shadow="soft"] {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
}

/* Medium */
.m-cart-count-bubble[data-shadow="medium"],
.m-cart-count[data-shadow="medium"],
.m-wishlist-count[data-shadow="medium"],
.m-compare-count[data-shadow="medium"] {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.08);
}

/* Strong */
.m-cart-count-bubble[data-shadow="strong"],
.m-cart-count[data-shadow="strong"],
.m-wishlist-count[data-shadow="strong"],
.m-compare-count[data-shadow="strong"] {
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15), 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Glow Effect */
.m-cart-count-bubble[data-shadow="glow"],
.m-cart-count[data-shadow="glow"],
.m-wishlist-count[data-shadow="glow"],
.m-compare-count[data-shadow="glow"] {
  box-shadow: 0 0 0 2px rgba(218, 63, 63, 0.3), 
              0 0 8px rgba(218, 63, 63, 0.4),
              0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Default shadow for existing bubbles */
.m-cart-count-bubble:not([data-shadow]),
.m-cart-count:not([data-shadow]),
.m-wishlist-count:not([data-shadow]),
.m-compare-count:not([data-shadow]) {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
}

/* Hover Animation */
.m-cart-count-bubble[data-animation="true"]:hover,
.m-cart-count[data-animation="true"]:hover,
.m-wishlist-count[data-animation="true"]:hover,
.m-compare-count[data-animation="true"]:hover {
  transform: scale(1.1);
}

/* Default hover effect for existing bubbles */
.m-cart-count-bubble:not([data-animation]):hover,
.m-cart-count:not([data-animation]):hover,
.m-wishlist-count:not([data-animation]):hover,
.m-compare-count:not([data-animation]):hover {
  transform: scale(1.1);
}

/* Disable animation when set to false */
.m-cart-count-bubble[data-animation="false"]:hover,
.m-cart-count[data-animation="false"]:hover,
.m-wishlist-count[data-animation="false"]:hover,
.m-compare-count[data-animation="false"]:hover {
  transform: none;
}

/* Mobile Sticky Bar Positioning */
.m-mobile-sticky-bar--item .m-cart-count-bubble {
  right: -18px;
  top: -7px;
}

.m-mobile-sticky-bar--item .m-wishlist-count {
  right: -15px;
  top: -7px;
}

/* RTL Support */
[dir="rtl"] .m-cart-count-bubble[data-position="top-right"],
[dir="rtl"] .m-cart-count[data-position="top-right"],
[dir="rtl"] .m-wishlist-count[data-position="top-right"],
[dir="rtl"] .m-compare-count[data-position="top-right"] {
  right: auto;
  left: -8px;
}

[dir="rtl"] .m-cart-count-bubble[data-position="top-left"],
[dir="rtl"] .m-cart-count[data-position="top-left"],
[dir="rtl"] .m-wishlist-count[data-position="top-left"],
[dir="rtl"] .m-compare-count[data-position="top-left"] {
  left: auto;
  right: -8px;
}

[dir="rtl"] .m-cart-count-bubble[data-position="bottom-right"],
[dir="rtl"] .m-cart-count[data-position="bottom-right"],
[dir="rtl"] .m-wishlist-count[data-position="bottom-right"],
[dir="rtl"] .m-compare-count[data-position="bottom-right"] {
  right: auto;
  left: -8px;
}

[dir="rtl"] .m-cart-count-bubble[data-position="bottom-left"],
[dir="rtl"] .m-cart-count[data-position="bottom-left"],
[dir="rtl"] .m-wishlist-count[data-position="bottom-left"],
[dir="rtl"] .m-compare-count[data-position="bottom-left"] {
  left: auto;
  right: -8px;
}

[dir="rtl"] .m-cart-count:not([data-position]) {
  right: auto;
  left: -5px;
}

[dir="rtl"] .m-wishlist-count:not([data-position]),
[dir="rtl"] .m-compare-count:not([data-position]) {
  right: auto;
  left: -4px;
}

[dir="rtl"] .m-mobile-sticky-bar--item .m-cart-count-bubble {
  right: auto;
  left: -18px;
}

[dir="rtl"] .m-mobile-sticky-bar--item .m-wishlist-count {
  right: auto;
  left: -15px;
}

/* Ensure visibility */
.m-cart-count-bubble:not(.m\:hidden),
.m-cart-count:not(.m\:hidden),
.m-wishlist-count:not(.m\:hidden),
.m-compare-count:not(.m\:hidden) {
  display: flex !important;
}

/* Hide when empty */
.m-cart-count-bubble.m\:hidden,
.m-cart-count.m\:hidden,
.m-wishlist-count.m\:hidden,
.m-compare-count.m\:hidden {
  display: none !important;
}

/* Accessibility and reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .m-cart-count-bubble,
  .m-cart-count,
  .m-wishlist-count,
  .m-compare-count {
    transition: none !important;
  }
  
  .m-cart-count-bubble:hover,
  .m-cart-count:hover,
  .m-wishlist-count:hover,
  .m-compare-count:hover {
    transform: none !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .m-cart-count-bubble,
  .m-cart-count,
  .m-wishlist-count,
  .m-compare-count {
    border-width: 2px !important;
  }
}

/* OVERRIDE HARDCODED POSITIONING FROM MAIN.CSS */
/* Remove hardcoded positioning that conflicts with count bubble system */
.m-cart-count {
  top: unset !important;
  right: unset !important;
  position: absolute !important;
}

.m-wishlist-count,
.m-compare-count {
  top: unset !important;
  right: unset !important;
  position: absolute !important;
}

/* Ensure both cart and wishlist bubbles use the same positioning system */
.m-cart-count,
.m-wishlist-count,
.m-compare-count {
  /* Let the count bubble system handle positioning via data attributes */
  position: absolute !important;
}